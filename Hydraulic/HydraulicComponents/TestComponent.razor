@using Blazor.Diagrams.Components.Renderers;
@inject SpawnEvents SpawnEvents;

<div class="component"
     @onclick="() => SpawnEvents.OnComponentSelected(Node.Props, this.Refresh )">

    @for (int i = 0; i < Node.DisplayState.Images.Length; i++)
    {
        if (i < 2)
        {
            <img src="@Node.DisplayState.Images[i]" height="50" width="50" ondragstart="{ return false }" />
        }
        else
        {
            <img src="@Node.DisplayState.Images[i]" height="50" width="50" ondragstart="{ return false }" 
                   style="transform: scaleX(-1);"/>
        }
    }

    @foreach (var port in Node.Ports)
    {
        <PortRenderer Port="port" Class="default"></PortRenderer>
    }
</div>

@code {
    [Parameter]
    public TestModel Node { get; set; }

    public void Refresh()
    {
        Node.DisplayState.UpdateDisplayState(Node.Props);
        InvokeAsync(StateHasChanged);
    }
}